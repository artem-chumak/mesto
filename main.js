(()=>{"use strict";var e={avatar:document.querySelector(".profile__avatar"),editProfile:document.querySelector(".profile__edit-button"),addPlace:document.querySelector(".profile__add-button")},t={inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_error",errorClass:"popup__input-error_active"};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t){var n=t.data,r=t.cardSelector,o=t.handleCardClick,i=t.userId,u=t.handleLikeClick,a=t.handleDeleteButton;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=n,this._place=n.name,this._link=n.link,this._ownerId=n.owner._id,this._cardId=n._id,this._likes=n.likes,this._cardSelector=document.querySelector(r).content,this._handleCardClick=o,this._userId=i,this._handleLikeClick=u,this._handleDeleteButton=a}var t,r;return t=e,(r=[{key:"getCardId",value:function(){return this._cardId}},{key:"_getTemplate",value:function(){return this._cardSelector.querySelector(".element").cloneNode(!0)}},{key:"_hideDeleteButton",value:function(){this._ownerId!==this._userId&&(this._deleteButton.style.display="none")}},{key:"isLiked",value:function(){return this._isLiked}},{key:"setLike",value:function(e){var t=this;this._isLiked=Boolean(e.likes.find((function(e){return e._id===t._userId}))),this._likeCounter.textContent=e.likes.length,this._isLiked?this._likeButton.classList.add("element__like-button_active"):this._likeButton.classList.remove("element__like-button_active")}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._titleElement=this._element.querySelector(".element__title"),this._imegeElement=this._element.querySelector(".element__image"),this._likeButton=this._element.querySelector(".element__like-button"),this._likeCounter=this._element.querySelector(".element__like-counter"),this._deleteButton=this._element.querySelector(".element__delete-button"),this._setEventListeners(),this._imegeElement.src=this._link,this._imegeElement.alt=this._place,this._titleElement.textContent=this._place,this._hideDeleteButton(),this.setLike(this._data),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._deleteButton.addEventListener("click",(function(){e._handleDeleteButton()})),this._likeButton.addEventListener("click",(function(){e._handleLikeClick()})),this._imegeElement.addEventListener("click",(function(){e._handleCardClick(e._place,e._link)}))}},{key:"handleDeleteCard",value:function(){this._element.remove(),this._element=null}}])&&n(t.prototype,r),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){var n=t.render,r=t.containerSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._containerSelector=document.querySelector(r),this._render=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._render(e)}))}},{key:"addItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t?this._containerSelector.append(e):this._containerSelector.prepend(e)}}])&&o(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"_clickOutForm",value:function(e){e.target===e.currentTarget&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popup.querySelector(".popup__exit-button").addEventListener("click",(function(t){return e.close()})),this._popup.addEventListener("click",(function(t){return e._clickOutForm(t)}))}}])&&u(t.prototype,n),e}();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupCaption=t._popup.querySelector(".popup__caption"),t}return t=u,(n=[{key:"open",value:function(e,t){this._popupCaption.textContent=e,this._popupImage.src=t,this._popupImage.alt=e,l(p(u.prototype),"open",this).call(this)}}])&&c(t.prototype,n),u}(a);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._handleFormSubmit=t,n._form=n._popup.querySelector(".popup__form"),n._confirmButton=n._form.querySelector(".popup__save-button"),n._inputs=n._form.querySelectorAll(".popup__input"),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputList=Array.from(this._inputs),this._formValues={},this._inputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setAutoFill",value:function(e){this._inputs.forEach((function(t){e[t.name]&&(t.value=e[t.name])}))}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())})),v(k(u.prototype),"setEventListeners",this).call(this)}},{key:"close",value:function(){v(k(u.prototype),"close",this).call(this),this._form.reset()}},{key:"setButtonText",value:function(e){this._confirmButton.textContent=e?"Сохранение...":"Сохранить"}}])&&y(t.prototype,n),u}(a);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return(w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return O(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._form=t._popup.querySelector(".popup__form"),t._confirmButton=t._form.querySelector(".popup__save-button"),t}return t=u,(n=[{key:"setNewHandler",value:function(e){this._handleFormSubmit=e}},{key:"setEventListeners",value:function(){var e=this;w(L(u.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit()}))}},{key:"setButtonText",value:function(e){this._confirmButton.textContent=e?"Удаление...":"Да"}}])&&S(t.prototype,n),u}(a);function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),B(this,"_hasInvalidInput",(function(){return r._inputList.some((function(e){return!e.validity.valid}))})),B(this,"toggleButtonState",(function(){r._hasInvalidInput()?(r._buttonElement.classList.add(r._inactiveButtonClass),r._buttonElement.setAttribute("disabled","disabled")):(r._buttonElement.classList.remove(r._inactiveButtonClass),r._buttonElement.removeAttribute("disabled"))})),B(this,"_showInputError",(function(e,t){var n=r._form.querySelector("#".concat(e.id,"-error"));e.classList.add(r._inputErrorClass),n.textContent=t,n.classList.add(r._errorClass)})),B(this,"_hideInputError",(function(e){var t=r._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(r._inputErrorClass),t.classList.remove(r._errorClass),t.textContent=""})),B(this,"_isValid",(function(e){!e.validity.valid||e.validity.typeMismatch?r._showInputError(e,e.validationMessage):r._hideInputError(e)})),B(this,"_setEventListeners",(function(){r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._isValid(e),r.toggleButtonState()}))}))})),B(this,"hideError",(function(){r._inputList.forEach((function(e){r._hideInputError(e)}))})),B(this,"enableValidation",(function(){r._setEventListeners(),r._form.addEventListener("submit",(function(e){e.preventDefault()}))})),this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=document.querySelector(n),this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)};function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(t){var n=t.userName,r=t.userAbout,o=t.userAvatar,i=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userOccupation=document.querySelector(r),this._avatar=document.querySelector(o),this._userId=i}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userOccupation.textContent,avatar:this._avatar,userId:this._userId}}},{key:"setUserInfo",value:function(e){this._userName.textContent=e.name,this._userOccupation.textContent=e.about,this._avatar.style.backgroundImage="url(".concat(e.avatar,")"),this._userId=e._id}}])&&j(t.prototype,n),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var t,n;return t=e,(n=[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getCards",value:function(){return fetch("".concat(this._baseUrl,"cards"),{headers:this._headers}).then(this._handleResponse)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"users/me"),{headers:this._headers}).then(this._handleResponse)}},{key:"getAllneededData",value:function(){return Promise.all([this.getCards(),this.getUserInfo()])}},{key:"setCard",value:function(e){return fetch("".concat(this._baseUrl,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._handleResponse)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleResponse)}},{key:"setAvatar",value:function(e){return fetch("".concat(this._baseUrl,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._handleResponse)}},{key:"setLike",value:function(e){return fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._handleResponse)}},{key:"setDislike",value:function(e){return fetch("".concat(this._baseUrl,"cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}},{key:"setDelete",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleResponse)}}])&&T(t.prototype,n),e}();function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){z.open(e,t)}function U(e){var t=new r({data:e,cardSelector:".element-template",handleCardClick:A,userId:M.getUserInfo().userId,handleLikeClick:function(){return function(e,t){(e.isLiked(t)?J.setDislike(t._id):J.setLike(t._id)).then((function(t){e.setLike(t)})).catch((function(e){console.log(e)}))}(t,e)},handleDeleteButton:function(){return function(e){H.open(),H.setNewHandler((function(){H.setButtonText(!0),J.setDelete(e.getCardId()).then((function(){e.handleDeleteCard(),H.close()})).catch((function(e){console.log(e)})).finally((function(){H.setButtonText(!1)}))}))}(t)}});return t.generateCard()}var D=new i({render:function(e){D.addItem(U(e))},containerSelector:".elements__list"}),N=new g("#add-place",(function(e){N.setButtonText(!0),J.setCard(e).then((function(e){D.addItem(U(e),!1),N.close()})).catch((function(e){console.log(e)})).finally((function(){N.setButtonText(!1)}))}));N.setEventListeners();var V=new g("#edit-profile",(function(e){V.setButtonText(!0),J.setUserInfo(e).then((function(e){M.setUserInfo(e),V.close()})).catch((function(e){console.log(e)})).finally((function(){V.setButtonText(!1)}))}));V.setEventListeners();var F=new g("#edit-avatar",(function(e){F.setButtonText(!0),J.setAvatar(e).then((function(e){M.setUserInfo(e),F.close()})).catch((function(e){console.log(e)})).finally((function(){F.setButtonText(!1)}))}));F.setEventListeners();var H=new I("#delete-conformation");H.setEventListeners();var J=new x({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-26/",headers:{authorization:"b0e0b94f-d543-4f9f-b125-9b741686cafd","Content-Type":"application/json"}}),M=new R({userName:".profile__name",userAbout:".profile__occupation",userAvatar:".profile__avatar",userId:null}),z=new d("#image-popup");z.setEventListeners();var $=new P(t,"#avatar-edit-form"),G=new P(t,"#plofile-edit-form"),K=new P(t,"#add-element-form");K.enableValidation(),G.enableValidation(),$.enableValidation(),J.getAllneededData().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],u=!0,a=!1;try{for(n=n.call(e);!(u=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);u=!0);}catch(e){a=!0,o=e}finally{try{u||null==n.return||n.return()}finally{if(a)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];M.setUserInfo(i),D.renderItems(o)})).catch((function(e){console.log(e)})),e.avatar.addEventListener("click",(function(){$.toggleButtonState(),$.hideError(),F.open()})),e.addPlace.addEventListener("click",(function(){K.toggleButtonState(),K.hideError(),N.open()})),e.editProfile.addEventListener("click",(function(){V.open();var e=M.getUserInfo();V.setAutoFill(e),G.toggleButtonState(),G.hideError()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL3V0aWxzL3ZhcmlhYmxlcy5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL3V0aWxzL3ZhbGlkYXRpb24tbGlzdC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJuYW1lcyI6WyJidXR0b25zIiwiYXZhdGFyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWRpdFByb2ZpbGUiLCJhZGRQbGFjZSIsImFycmF5VmFsaWRhdGlvbiIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkQ2xpY2siLCJ1c2VySWQiLCJoYW5kbGVMaWtlQ2xpY2siLCJoYW5kbGVEZWxldGVCdXR0b24iLCJ0aGlzIiwiX2RhdGEiLCJfcGxhY2UiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl9jYXJkSWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9jYXJkU2VsZWN0b3IiLCJjb250ZW50IiwiX2hhbmRsZUNhcmRDbGljayIsIl91c2VySWQiLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUJ1dHRvbiIsImNsb25lTm9kZSIsIl9kZWxldGVCdXR0b24iLCJzdHlsZSIsImRpc3BsYXkiLCJfaXNMaWtlZCIsIkJvb2xlYW4iLCJmaW5kIiwiaXRlbSIsIl9saWtlQ291bnRlciIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX2xpa2VCdXR0b24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl90aXRsZUVsZW1lbnQiLCJfaW1lZ2VFbGVtZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwic3JjIiwiYWx0IiwiX2hpZGVEZWxldGVCdXR0b24iLCJzZXRMaWtlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlNlY3Rpb24iLCJyZW5kZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9jb250YWluZXJTZWxlY3RvciIsIl9yZW5kZXIiLCJyZW5kZXJJdGVtcyIsImZvckVhY2giLCJlbGVtZW50Iiwib3JkZXIiLCJhcHBlbmQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldmVudCIsImtleSIsImNsb3NlIiwidGFyZ2V0IiwiY3VycmVudFRhcmdldCIsIl9jbGlja091dEZvcm0iLCJQb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwQ2FwdGlvbiIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9jb25maXJtQnV0dG9uIiwiX2lucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsImlzRGVsZXRpbmciLCJQb3B1cFdpdGhTdWJtaXQiLCJhY3Rpb24iLCJGb3JtVmFsaWRhdG9yIiwiZm9ybSIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hhc0ludmFsaWRJbnB1dCIsIl9idXR0b25FbGVtZW50IiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJzZXRBdHRyaWJ1dGUiLCJyZW1vdmVBdHRyaWJ1dGUiLCJlcnJvck1lc3NhZ2UiLCJlcnJvckVsZW1lbnQiLCJpZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsInR5cGVNaXNtYXRjaCIsIl9zaG93SW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2lzVmFsaWQiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiVXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsInVzZXJBdmF0YXIiLCJfdXNlck5hbWUiLCJfdXNlck9jY3VwYXRpb24iLCJfYXZhdGFyIiwiYWJvdXQiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJBcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2hhbmRsZVJlc3BvbnNlIiwiYWxsIiwiZ2V0Q2FyZHMiLCJnZXRVc2VySW5mbyIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicGxhY2UiLCJwb3B1cFR5cGVJbWFnZSIsIm9wZW4iLCJjcmVhdGVOZXdFbGVtZW50IiwiY2FyZCIsInVzZXJQcm9maWxlIiwiaXNMaWtlZCIsImFwaSIsInNldERpc2xpa2UiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJwb3B1cERlbGV0ZUNvbmZpcm1hdGlvbiIsInNldE5ld0hhbmRsZXIiLCJzZXRCdXR0b25UZXh0Iiwic2V0RGVsZXRlIiwiZ2V0Q2FyZElkIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImZpbmFsbHkiLCJnZW5lcmF0ZUNhcmQiLCJjYXJkTGlzdCIsImFkZEl0ZW0iLCJwb3B1cEFkZEVsZW1lbnQiLCJzZXRDYXJkIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJwb3B1cEVkaXRQcm9maWxlIiwidXNlckRhdGEiLCJzZXRVc2VySW5mbyIsInBvcHVwRWRpdEF2YXRhciIsInNldEF2YXRhciIsImF1dGhvcml6YXRpb24iLCJ2YWxpZGF0aW9uRWRpdEF2YXRhckZvcm0iLCJ2YWxpZGF0aW9uRWRpdEZvcm0iLCJ2YWxpZGF0aW9uQWRkRWxlbWVudEZvcm0iLCJlbmFibGVWYWxpZGF0aW9uIiwiZ2V0QWxsbmVlZGVkRGF0YSIsImNhcmRzIiwiaGlkZUVycm9yIiwicHJvZmlsZSIsInNldEF1dG9GaWxsIl0sIm1hcHBpbmdzIjoibUJBQU8sSUFzQk1BLEVBQVUsQ0FDckJDLE9BQVFDLFNBQVNDLGNBQWMsb0JBQy9CQyxZQUFhRixTQUFTQyxjQUFjLHlCQUNwQ0UsU0FBVUgsU0FBU0MsY0FBYyx5QkN6QnRCRyxFQUFrQixDQUM3QkMsY0FBZSxnQkFDZkMscUJBQXNCLHNCQUN0QkMsb0JBQXFCLDhCQUNyQkMsZ0JBQWlCLHFCQUNqQkMsV0FBWSw2QiwwS0NMT0MsRSxXQUNuQixjQUFrRyxJQUFwRkMsRUFBb0YsRUFBcEZBLEtBQU1DLEVBQThFLEVBQTlFQSxhQUFjQyxFQUFnRSxFQUFoRUEsZ0JBQWlCQyxFQUEr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WEMsV0FBWSxtQkFDWnRILE9BQVEsT1cySkprSixFQUFpQixJQUFJN0UsRVhwSmxCLGdCV3FKVDZFLEVBQWV3QixvQkFHZixJQUFNTyxFQUEyQixJQUFJdEYsRUFBY3JHLEVYbkp6QyxxQldvSko0TCxFQUFxQixJQUFJdkYsRUFBY3JHLEVYbkpsQyxzQldvSkw2TCxFQUEyQixJQUFJeEYsRUFBY3JHLEVYbkoxQyxxQldvSlQ2TCxFQUF5QkMsbUJBQ3pCRixFQUFtQkUsbUJBQ25CSCxFQUF5QkcsbUJBR3pCNUIsRUFBSTZCLG1CQUFtQjdDLE1BQUssU0FBQTNJLEdBQzFCLEksSUFBQSxHLEVBQUEsRSw0Q0FBNEJBLEksZ3hCQUFwQnlMLEVBQVIsS0FBZVYsRUFBZixLQUNBdEIsRUFBWXVCLFlBQVlELEdBQ3hCTixFQUFTbkgsWUFBWW1JLE1BRXBCNUIsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixNQUtoQjNLLEVBQVFDLE9BQU80RCxpQkFBaUIsU0E3RGhDLFdBQ0VvSSxFQUF5QmpFLG9CQUN6QmlFLEVBQXlCTSxZQUN6QlQsRUFBZ0IzQixVQTJEbEJuSyxFQUFRSyxTQUFTd0QsaUJBQWlCLFNBbEhsQyxXQUNFc0ksRUFBeUJuRSxvQkFDekJtRSxFQUF5QkksWUFDekJmLEVBQWdCckIsVUFnSGxCbkssRUFBUUksWUFBWXlELGlCQUFpQixTQTFGckMsV0FDRThILEVBQWlCeEIsT0FDakIsSUFBTXFDLEVBQVVsQyxFQUFZVixjQUM1QitCLEVBQWlCYyxZQUFZRCxHQUM3Qk4sRUFBbUJsRSxvQkFDbkJrRSxFQUFtQkssZ0IiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB1c2VySWZvcm1hdGlvbiA9IHtcbiAgdXNlck5hbWU6ICcucHJvZmlsZV9fbmFtZScsXG4gIHVzZXJBYm91dDogJy5wcm9maWxlX19vY2N1cGF0aW9uJyxcbiAgdXNlckF2YXRhcjogJy5wcm9maWxlX19hdmF0YXInLFxuICB1c2VySWQ6IG51bGwsXG59O1xuXG5leHBvcnQgY29uc3QgcG9wdXBzID0ge1xuICBhdmF0YXI6ICcjZWRpdC1hdmF0YXInLFxuICBwcm9maWxlOiAnI2VkaXQtcHJvZmlsZScsXG4gIGFkZFBsYWNlOiAnI2FkZC1wbGFjZScsXG4gIGltYWdlOiAnI2ltYWdlLXBvcHVwJyxcbiAgZGVsZXRlOiAnI2RlbGV0ZS1jb25mb3JtYXRpb24nXG59XG5cbmV4cG9ydCBjb25zdCBmb3JtcyA9IHtcbiAgYXZhdGFyOiAnI2F2YXRhci1lZGl0LWZvcm0nLFxuICBwbG9maWxlOiAnI3Bsb2ZpbGUtZWRpdC1mb3JtJyxcbiAgcGxhY2U6ICcjYWRkLWVsZW1lbnQtZm9ybScsXG4gIGRlbGV0ZTogJyNkZWxldGUtY29uZm9ybWF0aW9uLWZvcm0nXG59XG5cbmV4cG9ydCBjb25zdCBidXR0b25zID0ge1xuICBhdmF0YXI6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKSxcbiAgZWRpdFByb2ZpbGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpLFxuICBhZGRQbGFjZTogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKVxufVxuXG5leHBvcnQgY29uc3QgdGVtcGxhdGUgPSB7XG4gIGxpc3RFbGVtZW50czogJy5lbGVtZW50c19fbGlzdCcsXG4gIGVsZW1lbnQ6ICcuZWxlbWVudC10ZW1wbGF0ZSdcbn1cblxuZXhwb3J0IGNvbnN0IGFwaUluZm8gPSB7XG4gIHVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtMjYvJyxcbiAgdG9rZW46ICdiMGUwYjk0Zi1kNTQzLTRmOWYtYjEyNS05Yjc0MTY4NmNhZmQnXG59IiwiZXhwb3J0IGNvbnN0IGFycmF5VmFsaWRhdGlvbiA9IHtcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZS1idXR0b24nLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmUtYnV0dG9uX2Rpc2FibGVkJyxcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGNhcmRTZWxlY3RvciwgaGFuZGxlQ2FyZENsaWNrLCB1c2VySWQsIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlQnV0dG9uIH0pIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9wbGFjZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX293bmVySWQgPSBkYXRhLm93bmVyLl9pZDtcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihjYXJkU2VsZWN0b3IpLmNvbnRlbnQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcbiAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sgPSBoYW5kbGVMaWtlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQnV0dG9uID0gaGFuZGxlRGVsZXRlQnV0dG9uO1xuICB9XG5cbiAgZ2V0Q2FyZElkKCkge1xuICAgIHJldHVybiB0aGlzLl9jYXJkSWQ7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSB0aGlzLl9jYXJkU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLmVsZW1lbnQnKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgX2hpZGVEZWxldGVCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuX293bmVySWQgIT09IHRoaXMuX3VzZXJJZCkge1xuICAgICAgdGhpcy5fZGVsZXRlQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuICB9XG5cbiAgaXNMaWtlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNMaWtlZDtcbiAgfVxuXG4gIHNldExpa2UoZGF0YSkge1xuICAgIHRoaXMuX2lzTGlrZWQgPSBCb29sZWFuIChkYXRhLmxpa2VzLmZpbmQoKGl0ZW0pID0+IHtyZXR1cm4gaXRlbS5faWQgPT09IHRoaXMuX3VzZXJJZH0pKTtcbiAgICB0aGlzLl9saWtlQ291bnRlci50ZXh0Q29udGVudCA9IGRhdGEubGlrZXMubGVuZ3RoO1xuICAgIGlmICh0aGlzLl9pc0xpa2VkKSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScpO1xuICAgIH1cbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZScpO1xuICAgIHRoaXMuX2ltZWdlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtYnV0dG9uJyk7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWNvdW50ZXInKTtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19kZWxldGUtYnV0dG9uJyk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9pbWVnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9pbWVnZUVsZW1lbnQuYWx0ID0gdGhpcy5fcGxhY2U7XG4gICAgdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fcGxhY2U7XG4gICAgdGhpcy5faGlkZURlbGV0ZUJ1dHRvbigpO1xuICAgIHRoaXMuc2V0TGlrZSh0aGlzLl9kYXRhKTtcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVCdXR0b24oKTtcbiAgICB9KTtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrKCk7XG4gICAgfSk7XG4gICAgdGhpcy5faW1lZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX3BsYWNlLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIGhhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtyZW5kZXIsIGNvbnRhaW5lclNlbGVjdG9yfSkge1xuICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XG4gICAgdGhpcy5fcmVuZGVyID0gcmVuZGVyO1xuICB9XG5cbiAgcmVuZGVySXRlbXMocmVuZGVySXRlbXMpIHtcbiAgICByZW5kZXJJdGVtcy5mb3JFYWNoKGl0ZW0gPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyKGl0ZW0pXG4gICAgfSk7XG5cbiAgfVxuXG4gIGFkZEl0ZW0oZWxlbWVudCwgb3JkZXIgPSB0cnVlKSB7XG4gICAgaWYgKG9yZGVyKSB7XG4gICAgICB0aGlzLl9jb250YWluZXJTZWxlY3Rvci5hcHBlbmQoZWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NvbnRhaW5lclNlbGVjdG9yLnByZXBlbmQoZWxlbWVudCk7XG4gICAgfVxuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKVxuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2NsaWNrT3V0Rm9ybShldmVudCkge1xuICAgIGlmIChldmVudC50YXJnZXQgPT09IGV2ZW50LmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2V4aXQtYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHRoaXMuX2NsaWNrT3V0Rm9ybShldmVudCkpXG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX3BvcHVwSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKTtcbiAgICB0aGlzLl9pbnB1dHMgPXRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5faW5wdXRzKTtcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWVcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgfVxuXG4gIHNldEF1dG9GaWxsKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgaWYgKGRhdGFbaXRlbS5uYW1lXSkge1xuICAgICAgICBpdGVtLnZhbHVlID0gZGF0YVtpdGVtLm5hbWVdXG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgc2V0QnV0dG9uVGV4dChpc0RlbGV0aW5nKSB7XG4gICAgaWYgKGlzRGVsZXRpbmcpIHtcbiAgICAgIHRoaXMuX2NvbmZpcm1CdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NvbmZpcm1CdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LjRgtGMJ1xuICAgIH1cbiAgfVxufSIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoU3VibWl0IGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2NvbmZpcm1CdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKVxuICB9XG5cbiAgc2V0TmV3SGFuZGxlcihhY3Rpb24pIHtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gYWN0aW9uO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxuXG4gIHNldEJ1dHRvblRleHQoaXNEZWxldGluZykge1xuICAgIGlmIChpc0RlbGV0aW5nKSB7XG4gICAgICB0aGlzLl9jb25maXJtQnV0dG9uLnRleHRDb250ZW50ID0gJ9Cj0LTQsNC70LXQvdC40LUuLi4nXG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2NvbmZpcm1CdXR0b24udGV4dENvbnRlbnQgPSAn0JTQsCdcbiAgICB9XG4gIH1cblxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihkYXRhLCBmb3JtKSB7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGRhdGEuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGRhdGEuc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IGRhdGEuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBkYXRhLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gZGF0YS5lcnJvckNsYXNzO1xuICAgIHRoaXMuX2Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGZvcm0pO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pXG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgICB9XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgX2lzVmFsaWQgPSAoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQgfHwgaW5wdXRFbGVtZW50LnZhbGlkaXR5LnR5cGVNaXNtYXRjaCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSlcbiAgICB9KVxuICB9XG5cbiAgaGlkZUVycm9yID0gKCkgPT4ge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSlcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3Ioe3VzZXJOYW1lLCB1c2VyQWJvdXQsIHVzZXJBdmF0YXIsIHVzZXJJZH0pIHtcbiAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xuICAgIHRoaXMuX3VzZXJPY2N1cGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQWJvdXQpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhcilcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fdXNlck9jY3VwYXRpb24udGV4dENvbnRlbnQsXG4gICAgICBhdmF0YXI6IHRoaXMuX2F2YXRhcixcbiAgICAgIHVzZXJJZDogdGhpcy5fdXNlcklkXG4gICAgfVxuICB9XG5cbiAgc2V0VXNlckluZm8oZGF0YSkge1xuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX3VzZXJPY2N1cGF0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcbiAgICB0aGlzLl9hdmF0YXIuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2RhdGEuYXZhdGFyfSlgO1xuICAgIHRoaXMuX3VzZXJJZCA9IGRhdGEuX2lkO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIF9oYW5kbGVSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcbiAgfTtcblxuICBnZXRDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGdldEFsbG5lZWRlZERhdGEoKSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldENhcmRzKCksIHRoaXMuZ2V0VXNlckluZm8oKV0pXG4gIH1cblxuICBzZXRDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICBsaW5rOiBkYXRhLmxpbmssXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBzZXRVc2VySW5mbyhkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgc2V0QXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgc2V0TGlrZShkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvbGlrZXMvJHtkYXRhfWAsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBzZXREaXNsaWtlKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkcy9saWtlcy8ke2RhdGF9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIHNldERlbGV0ZShkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvJHtkYXRhfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG5cbiAgfVxufSIsImltcG9ydCAnLi4vcGFnZXMvaW5kZXguY3NzJztcbmltcG9ydCB7IHVzZXJJZm9ybWF0aW9uLCBwb3B1cHMsIGZvcm1zLCBidXR0b25zLCB0ZW1wbGF0ZSwgYXBpSW5mb30gZnJvbSAnLi4vdXRpbHMvdmFyaWFibGVzLmpzJ1xuaW1wb3J0IHsgYXJyYXlWYWxpZGF0aW9uIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGlvbi1saXN0LmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJ1xuaW1wb3J0IFBvcHVwV2l0aFN1Ym1pdCBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aFN1Ym1pdCc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4uL2NvbXBvbmVudHMvVXNlckluZm8uanMnO1xuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcydcblxuLy9FTEVNRU5UXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2socGxhY2UsIGxpbmspIHtcbiAgcG9wdXBUeXBlSW1hZ2Uub3BlbihwbGFjZSwgbGluayk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUJ1dHRvbihjYXJkKSB7XG4gIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLm9wZW4oKTtcbiAgcG9wdXBEZWxldGVDb25maXJtYXRpb24uc2V0TmV3SGFuZGxlcigoKSA9PiB7XG4gICAgcG9wdXBEZWxldGVDb25maXJtYXRpb24uc2V0QnV0dG9uVGV4dCh0cnVlKTtcbiAgICBhcGkuc2V0RGVsZXRlKGNhcmQuZ2V0Q2FyZElkKCkpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgICBwb3B1cERlbGV0ZUNvbmZpcm1hdGlvbi5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycilcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHBvcHVwRGVsZXRlQ29uZmlybWF0aW9uLnNldEJ1dHRvblRleHQoZmFsc2UpO1xuICAgICAgfSlcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayhjYXJkLCBkYXRhKSB7XG4gIGNvbnN0IGZpcnN0QWN0aW9uID0gY2FyZC5pc0xpa2VkKGRhdGEpID8gYXBpLnNldERpc2xpa2UoZGF0YS5faWQpIDogYXBpLnNldExpa2UoZGF0YS5faWQpO1xuICBmaXJzdEFjdGlvblxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjYXJkLnNldExpa2UoZGF0YSk7XG4gICAgfSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTmV3RWxlbWVudChkYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YTogZGF0YSxcbiAgICBjYXJkU2VsZWN0b3I6IHRlbXBsYXRlLmVsZW1lbnQsXG4gICAgaGFuZGxlQ2FyZENsaWNrOiBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgdXNlcklkOiB1c2VyUHJvZmlsZS5nZXRVc2VySW5mbygpLnVzZXJJZCxcbiAgICBoYW5kbGVMaWtlQ2xpY2s6ICgpID0+IGhhbmRsZUxpa2VDbGljayhjYXJkLCBkYXRhKSxcbiAgICBoYW5kbGVEZWxldGVCdXR0b246ICgpID0+IGhhbmRsZURlbGV0ZUJ1dHRvbihjYXJkKSxcbiAgfSlcbiAgcmV0dXJuIGNhcmQuZ2VuZXJhdGVDYXJkKCk7XG59XG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICByZW5kZXI6IChpdGVtKSA9PiB7XG4gICAgY2FyZExpc3QuYWRkSXRlbShjcmVhdGVOZXdFbGVtZW50KGl0ZW0pKVxuICB9LFxuICBjb250YWluZXJTZWxlY3RvcjogdGVtcGxhdGUubGlzdEVsZW1lbnRzXG59KVxuXG4vL1BPUFVQIEFERCBFTEVNRU5UXG5jb25zdCBwb3B1cEFkZEVsZW1lbnQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cHMuYWRkUGxhY2UsIGhhbmRsZUZvcm1BZGRFbGVtZW50KTtcbnBvcHVwQWRkRWxlbWVudC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBoYW5kbGVCdXR0b25BZGRFbGVtZW50KCkge1xuICB2YWxpZGF0aW9uQWRkRWxlbWVudEZvcm0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgdmFsaWRhdGlvbkFkZEVsZW1lbnRGb3JtLmhpZGVFcnJvcigpO1xuICBwb3B1cEFkZEVsZW1lbnQub3BlbigpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JtQWRkRWxlbWVudChkYXRhKSB7XG4gIHBvcHVwQWRkRWxlbWVudC5zZXRCdXR0b25UZXh0KHRydWUpO1xuICBhcGkuc2V0Q2FyZChkYXRhKVxuICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICBjYXJkTGlzdC5hZGRJdGVtKGNyZWF0ZU5ld0VsZW1lbnQoZGF0YSksIGZhbHNlKTs7XG4gICAgICBwb3B1cEFkZEVsZW1lbnQuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEFkZEVsZW1lbnQuc2V0QnV0dG9uVGV4dChmYWxzZSk7XG4gICAgfSlcbn1cblxuLy9QT1BVUCBFRElUIFBST0ZJTEVcbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cHMucHJvZmlsZSwgaGFuZGxlRm9ybVByb2ZpbGUpXG5wb3B1cEVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUJ1dHRvbkVkaXQoKSB7XG4gIHBvcHVwRWRpdFByb2ZpbGUub3BlbigpO1xuICBjb25zdCBwcm9maWxlID0gdXNlclByb2ZpbGUuZ2V0VXNlckluZm8oKVxuICBwb3B1cEVkaXRQcm9maWxlLnNldEF1dG9GaWxsKHByb2ZpbGUpO1xuICB2YWxpZGF0aW9uRWRpdEZvcm0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgdmFsaWRhdGlvbkVkaXRGb3JtLmhpZGVFcnJvcigpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JtUHJvZmlsZSh1c2VyRGF0YSkge1xuICBwb3B1cEVkaXRQcm9maWxlLnNldEJ1dHRvblRleHQodHJ1ZSk7XG4gIGFwaS5zZXRVc2VySW5mbyh1c2VyRGF0YSlcbiAgICAudGhlbigodXNlckRhdGEpID0+IHtcbiAgICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKHVzZXJEYXRhKTtcbiAgICAgIHBvcHVwRWRpdFByb2ZpbGUuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlLnNldEJ1dHRvblRleHQoZmFsc2UpO1xuICAgIH0pXG59XG5cbi8vUE9QVVAgRURJVCBBVkFUQVJcbmNvbnN0IHBvcHVwRWRpdEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwcy5hdmF0YXIsIGhhbmRsZUZvcm1BdmF0YXIpXG5wb3B1cEVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlQXZhdGFyKCkge1xuICB2YWxpZGF0aW9uRWRpdEF2YXRhckZvcm0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgdmFsaWRhdGlvbkVkaXRBdmF0YXJGb3JtLmhpZGVFcnJvcigpO1xuICBwb3B1cEVkaXRBdmF0YXIub3BlbigpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVGb3JtQXZhdGFyKGRhdGEpIHtcbiAgcG9wdXBFZGl0QXZhdGFyLnNldEJ1dHRvblRleHQodHJ1ZSk7XG4gIGFwaS5zZXRBdmF0YXIoZGF0YSlcbiAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8oZGF0YSk7XG4gICAgICBwb3B1cEVkaXRBdmF0YXIuY2xvc2UoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cEVkaXRBdmF0YXIuc2V0QnV0dG9uVGV4dChmYWxzZSk7XG4gICAgfSlcbn1cblxuLy9QT1BVUCBERUxFVEUgQ09ORklSTUFUSU9OXG5jb25zdCBwb3B1cERlbGV0ZUNvbmZpcm1hdGlvbiA9IG5ldyBQb3B1cFdpdGhTdWJtaXQocG9wdXBzLmRlbGV0ZSk7XG5wb3B1cERlbGV0ZUNvbmZpcm1hdGlvbi5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL0FQSVxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IGFwaUluZm8udXJsLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogYXBpSW5mby50b2tlbixcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn0pO1xuXG4vL1VTRVIgSU5GT1xuY29uc3QgdXNlclByb2ZpbGUgPSBuZXcgVXNlckluZm8odXNlcklmb3JtYXRpb24pO1xuXG4vL1BPUFVQIElNQUdFXG5jb25zdCBwb3B1cFR5cGVJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cHMuaW1hZ2UpO1xucG9wdXBUeXBlSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9WQUxJREFUSU9OU1xuY29uc3QgdmFsaWRhdGlvbkVkaXRBdmF0YXJGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoYXJyYXlWYWxpZGF0aW9uLCBmb3Jtcy5hdmF0YXIpO1xuY29uc3QgdmFsaWRhdGlvbkVkaXRGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoYXJyYXlWYWxpZGF0aW9uLCBmb3Jtcy5wbG9maWxlKTtcbmNvbnN0IHZhbGlkYXRpb25BZGRFbGVtZW50Rm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKGFycmF5VmFsaWRhdGlvbiwgZm9ybXMucGxhY2UpO1xudmFsaWRhdGlvbkFkZEVsZW1lbnRGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcbnZhbGlkYXRpb25FZGl0Rm9ybS5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZGF0aW9uRWRpdEF2YXRhckZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vLypQYWdlIHJlbmRlclxuYXBpLmdldEFsbG5lZWRlZERhdGEoKS50aGVuKGRhdGEgPT4ge1xuICBjb25zdCBbIGNhcmRzLCB1c2VyRGF0YSBdID0gZGF0YTtcbiAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8odXNlckRhdGEpO1xuICBjYXJkTGlzdC5yZW5kZXJJdGVtcyhjYXJkcyk7XG59KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUubG9nKGVycilcbiAgfVxuKTtcblxuLy8qIEV2ZW50czpcbmJ1dHRvbnMuYXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQXZhdGFyKTtcbmJ1dHRvbnMuYWRkUGxhY2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVCdXR0b25BZGRFbGVtZW50KTtcbmJ1dHRvbnMuZWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVCdXR0b25FZGl0KTsiXSwic291cmNlUm9vdCI6IiJ9